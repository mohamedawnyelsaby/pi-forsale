<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forsale - ุณูู Pi ุงููุชูุงูู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script>
        // ุชููุฆุฉ Pi SDK ูุฅุนุฏุงุฏุงุช Tailwind
        Pi.init({
            version: "2.0",
            api_version: "20240425",
        });

        // ุฅุนุฏุงุฏุงุช Tailwind ูุฎุตุตุฉ
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        pi: '#FFC800', // ููู Pi ุงูุฃุตูุฑ
                        piDark: '#333333', // ููู Pi ุงูุฃุณูุฏ
                        piLight: '#FFFBEA', // ุฎูููุฉ ูุงุชุญุฉ
                        piGray: '#F5F5F5' // ุฑูุงุฏู ูุงุชุญ
                    },
                    fontFamily: {
                        sans: ['Cairo', 'Inter', 'sans-serif'], // ุงุณุชุฎุฏุงู ุฎุท ุงููุงูุฑุฉ ููุบุฉ ุงูุนุฑุจูุฉ
                    }
                }
            }
        }
    </script>
    <style>
        /* ูุถูุงู ุชูุงุณู ุงูุฎุท ุงูุนุฑุจู */
        body { font-family: 'Cairo', 'Inter', sans-serif; }
        /* ุชุตููู ุฒุฑ Pi ุจููุณุฉ ุฌูุงููุฉ */
        #buy-button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        #buy-button:hover {
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="bg-piGray min-h-screen flex flex-col font-sans text-right">

    <header class="bg-piDark text-white p-4 shadow-xl">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold tracking-wider text-pi">Forsale | ุณูู Pi</h1>
            <div id="auth-status" class="text-sm bg-pi rounded-full px-3 py-1 text-piDark font-semibold">
                <span id="username-display">ุฌุงุฑู ุงูุชุญูู ูู ูููุฉ Pi...</span>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 flex-grow">
        <h2 class="text-3xl font-extrabold text-piDark mb-6 text-center">ุฃูุถู ุงูุนุฑูุถ ุนูู ุดุจูุฉ ุงูุงุฎุชุจุงุฑ (Testnet)</h2>
        
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">

            <aside class="lg:col-span-1 space-y-4">
                <div class="bg-white rounded-xl shadow-lg p-4 border-r-4 border-pi">
                    <h3 class="text-lg font-bold text-piDark mb-3">ููุชุฌุงุช ููุชุฑุญุฉ</h3>
                    <ul class="space-y-3 text-sm">
                        <li class="p-2 border-b border-gray-100 hover:bg-gray-50 rounded-md transition-colors duration-150 cursor-pointer">ูุงุชู Pi ุงูุฐูู - 5.0 ฯ</li>
                        <li class="p-2 border-b border-gray-100 hover:bg-gray-50 rounded-md transition-colors duration-150 cursor-pointer">ุฏุฑูุณ ุจุฑูุฌุฉ - 2.0 ฯ</li>
                        <li class="p-2 hover:bg-gray-50 rounded-md transition-colors duration-150 cursor-pointer">ุฎูููุงุช ุญุตุฑูุฉ - 0.5 ฯ</li>
                    </ul>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-4 border-r-4 border-piDark">
                    <h3 class="text-lg font-bold text-piDark mb-3">ุฑุณุงูุฉ ุงููุธุงู</h3>
                    <p id="message-box" class="text-gray-700 text-sm">ุงูุฑุฌุงุก ุงูุชุธุงุฑ ุงููุตุงุฏูุฉ ุงูุชููุงุฆูุฉ ูู Pi...</p>
                    <p class="mt-3 text-xs text-gray-500">ูุฅุทูุงู ุนูููุฉ ุงูุฏูุนุ ุงุถุบุท ุนูู "ุดุฑุงุก ุงูุขู" ุนูู ุงูููุชุฌ ุงูุฑุฆูุณู.</p>
                </div>
            </aside>

            <section class="lg:col-span-3 bg-white rounded-xl shadow-2xl p-8 border-t-8 border-pi transform hover:shadow-3xl transition-shadow duration-300">
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    
                    <div>
                        <img src="https://placehold.co/600x400/333333/FFC800?text=Premium+Smartwatch" alt="Smart Watch" class="w-full h-auto rounded-xl shadow-lg object-cover mb-4">
                        <h2 class="text-3xl font-extrabold text-piDark mb-2">ุณุงุนุฉ ุฐููุฉ ูุชูุฏูุฉ V2</h2>
                        <div class="text-sm text-gray-500 mb-4 flex space-x-4 space-x-reverse">
                            <span>ุงูุชูููู: โญ๏ธโญ๏ธโญ๏ธโญ๏ธ (4.5)</span>
                            <span>ุงููุฎุฒูู: 15 ูุทุนุฉ</span>
                        </div>
                        <p class="text-gray-700 leading-relaxed">
                            ูุฐุง ุงูููุชุฌ ูู ุฅุนูุงู ุชุฌุฑูุจู ูุฎุตุต ูุงุฎุชุจุงุฑ ุฏูุฌ Pi SDK. ูุชููุฒ ุจุชุตูููู ุงูุนุตุฑู ูููุฒุงุชู ุงูุฐููุฉ. ุนูุฏ ุงูุถุบุท ุนูู "ุดุฑุงุก"ุ ุณูุชู ูุชุญ ูุงูุฐุฉ ูุญูุธุฉ Pi Testnet ูุชุฃููุฏ ุงููุนุงููุฉ ุจูููุฉ 10 ฯ.
                        </p>
                    </div>

                    <div class="md:border-r md:pr-8 md:border-gray-200">
                        <div class="mb-8">
                            <span class="text-sm text-gray-500 block">ุงูุณุนุฑ ุนูู ุดุจูุฉ ุงูุงุฎุชุจุงุฑ:</span>
                            <span class="text-5xl font-black text-piDark block">10.0 <span class="text-pi">ฯ</span></span>
                        </div>

                        <button id="buy-button" class="w-full bg-pi text-piDark font-bold py-4 px-6 rounded-xl shadow-lg hover:bg-yellow-400 transition-colors duration-300 transform active:scale-[0.99] disabled:opacity-50 disabled:cursor-not-allowed" onclick="createPiPayment()" disabled>
                            ุดุฑุงุก ุงูุขู ุจู 10.0 ฯ
                        </button>

                        <div id="payment-status-info" class="mt-6 p-4 bg-piLight rounded-lg border border-pi text-sm text-gray-800">
                            **ุญุงูุฉ ุงูุฏูุน:** <span id="payment-status" class="font-semibold text-piDark">ุบูุฑ ูุดุท (ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู)</span>
                        </div>

                        <div class="mt-6 text-sm text-gray-500">
                            <p class="mb-2">โ๏ธ **ููุงุญุธุฉ:** ูุชู ุงูุชุนุงูู ูุน ูุฐู ุงููุนุงููุฉ ุนูู ุดุจูุฉ ุงูุงุฎุชุจุงุฑ (Testnet) ููุง ุชุณุชุฎุฏู ุนููุฉ Pi ุงูุญููููุฉ.</p>
                        </div>
                    </div>
                </div>

            </section>
        </div>
    </main>

    <footer class="bg-piDark text-white text-center p-4 text-sm mt-8">
        <p>&copy; 2025 Forsale Marketplace. ูุฏุนูู ุจูุงุณุทุฉ Pi Network.</p>
    </footer>

    <script>
        const MESSAGE_BOX = document.getElementById('message-box');
        const USERNAME_DISPLAY = document.getElementById('username-display');
        const BUY_BUTTON = document.getElementById('buy-button');
        const PAYMENT_STATUS_DISPLAY = document.getElementById('payment-status');

        // ุชุญุฏูุซ ุฑุณุงูุฉ ุงูุญุงูุฉ ูู ุงูุดุฑูุท ุงูุฌุงูุจู ููู ููุญุฉ ุงูุฏูุน
        function updateStatus(message, isError = false, isSuccess = false) {
            MESSAGE_BOX.innerHTML = message;
            PAYMENT_STATUS_DISPLAY.innerHTML = message;
            
            PAYMENT_STATUS_DISPLAY.classList.remove('text-red-600', 'text-green-600', 'text-piDark');
            if (isError) {
                PAYMENT_STATUS_DISPLAY.classList.add('text-red-600');
            } else if (isSuccess) {
                PAYMENT_STATUS_DISPLAY.classList.add('text-green-600');
            } else {
                PAYMENT_STATUS_DISPLAY.classList.add('text-piDark');
            }
        }

        // 1. ูุธููุฉ ุงููุตุงุฏูุฉ ุงูุชููุงุฆูุฉ (ุงูุงุชุตุงู)
        async function authenticatePiUser() {
            try {
                updateStatus('ุฌุงุฑู ูุญุงููุฉ ุงูุงุชุตุงู ุจู Pi Browser...');
                // ุทูุจ ุงููุตุงุฏูุฉ ูุทูุจ ุงูุฅุฐู ุจุงุณู ุงููุณุชุฎุฏู
                const auth = await Pi.authenticate(['username'], onIncompletePaymentFound);
                
                const username = auth.user.username;
                USERNAME_DISPLAY.textContent = `ูุฑุญุจุงูุ ${username}`;
                updateStatus(`ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ! ุงุณู ูุณุชุฎุฏู Pi: ${username}`, false, true);
                
                // ุชูููู ุฒุฑ ุงูุดุฑุงุก
                BUY_BUTTON.disabled = false;
                
            } catch (error) {
                console.error("Authentication failed:", error);
                USERNAME_DISPLAY.textContent = "ูุดู ุงููุตุงุฏูุฉ!";
                updateStatus(`ุฎุทุฃ: ${error.message}. ูุฑุฌู ุงููุชุญ ุนุจุฑ Pi Browser.`, true);
                BUY_BUTTON.disabled = true;
            }
        }

        // 2. ูุธููุฉ ุฅูุดุงุก ุงูุฏูุน
        function createPiPayment() {
            BUY_BUTTON.disabled = true;
            BUY_BUTTON.textContent = 'ุฌุงุฑู ุฅุทูุงู ุงูุฏูุน...';
            updateStatus('ุฌุงุฑู ุฅุนุฏุงุฏ ุทูุจ ุงูุฏูุน...');

            const product = {
                amount: 10.0, 
                memo: "ุดุฑุงุก ุณุงุนุฉ ุฐููุฉ ูุชูุฏูุฉ ูู ูุชุฌุฑ Forsale (ุงุฎุชุจุงุฑ)", 
                metadata: {
                    item_id: "SMARTWATCH-001",
                }
            };

            const callbacks = {
                onReadyForServerApproval: function(paymentId) {
                    // ูู ุจูุฆุฉ ุงูุฅูุชุงุฌุ ูุชู ููุง ุฅุฑุณุงู paymentId ุฅูู ุฎุงุฏูู ููููุงููุฉ
                    updateStatus(`ุชู ุฅูุดุงุก ุงููุนุงููุฉ: ${paymentId}. ููุชุธุฑ ููุงููุฉ ุงููุณุชุฎุฏู ูุงูุฏูุน...`);
                    
                    // ูุบุฑุถ ุงูุงุฎุชุจุงุฑ ุงูุจุณูุท (ูุฌุจ ุฅุฒุงูุฉ ูุฐุง ุงูุณุทุฑ ูู ุงูุฅูุชุงุฌ)
                    Pi.payments.complete(paymentId, { txid: "TEST_TXID_FROM_SERVER" })
                        .catch(err => updateStatus(`ุฎุทุฃ ูู ุงูุฅููุงู: ${err.message}`, true));
                },
                onReadyForServerCompletion: function(paymentId, txid) {
                    // ูู ุจูุฆุฉ ุงูุฅูุชุงุฌุ ูุชู ููุง ุฅุฑุณุงู paymentId ู txid ุฅูู ุฎุงุฏูู ููุชุญูู ุงูููุงุฆู
                    updateStatus(`ุชู ุงูุฏูุน ุจูุฌุงุญ! ุฑูู TxID: ${txid}.`, false, true);
                    BUY_BUTTON.textContent = 'ุชู ุงูุดุฑุงุก ุจูุฌุงุญ! โ';
                    BUY_BUTTON.classList.replace('bg-pi', 'bg-green-500');
                    BUY_BUTTON.disabled = true;
                },
                onCancel: function(paymentId) {
                    updateStatus(`ุชู ุฅูุบุงุก ุงูุฏูุน. ููููู ุงููุญุงููุฉ ูุฌุฏุฏุงู.`, false);
                    BUY_BUTTON.disabled = false;
                    BUY_BUTTON.textContent = 'ุดุฑุงุก ุงูุขู ุจู 10.0 ฯ';
                    BUY_BUTTON.classList.replace('bg-green-500', 'bg-pi');
                },
                onError: function(error, payment) {
                    console.error("Payment error:", error);
                    updateStatus(`ุฎุทุฃ ูู ุงูุฏูุน: ${error.message}`, true);
                    BUY_BUTTON.disabled = false;
                    BUY_BUTTON.textContent = 'ุดุฑุงุก ุงูุขู ุจู 10.0 ฯ';
                    BUY_BUTTON.classList.replace('bg-green-500', 'bg-pi');
                }
            };

            Pi.payments.create(product, callbacks);
        }

        // 3. ูุธููุฉ ูุนุงูุฌุฉ ุงููุฏููุนุงุช ุบูุฑ ุงูููุชููุฉ
        function onIncompletePaymentFound(payment) {
            updateStatus(`ุชูุฌุฏ ูุนุงููุฉ ุณุงุจูุฉ ุบูุฑ ููุชููุฉ: ${payment.identifier}. ุงูุฑุฌุงุก ุฅููุงููุง.`, false);
        }

        // ุฅุทูุงู ุงููุตุงุฏูุฉ ุจูุฌุฑุฏ ุชุญููู ุงูุตูุญุฉ
        window.onload = function() {
            authenticatePiUser();
        };

    </script>
</body>
</html>
```eof

---

### ๐ ุงูุฎุทูุฉ ุงูุชุงููุฉ:

1.  **ุงุฐูุจ ุฅูู $\text{GitHub}$**ุ ููู ุจูุตู ุงูููุฏ ูุญูุธ ุงูุชุบููุฑุงุช.
2.  **ุงุณุชูุฑ ูู ุงูุชุญูู** ูู ูุงุฆูุฉ ูุญุต ุชุทุจููู ุนูู ุจูุงุจุฉ ุงููุทูุฑูู.

ูู ุงููุญุธุฉ ุงูุชู ูุชู ูููุง ุญู ูุดููุฉ ุงูุฎุทูุฉ 2 (`Configure Hosting`) ูู ูุจู ูุฑูู ุงูุฏุนูุ ุฃุฎุจุฑูู ููุฑุงู ูููุชูู ุฅูู ุงูุฎุทูุฉ 3 (`Connect App Wallet`).
