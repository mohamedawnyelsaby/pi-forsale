<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi Network Force</title>
    
    <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø© -->
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>

    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; padding: 20px; }
        button { 
            padding: 20px; width: 100%; font-size: 20px; border-radius: 10px; 
            border: none; cursor: pointer; margin-top: 20px; font-weight: bold;
            display: none; /* Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        }
        #btn-login { background: #F8B62C; color: #000; }
        #status { font-size: 18px; margin-bottom: 20px; color: #00f2ff; }
    </style>
</head>
<body>

    <h2>Ù†Ø¸Ø§Ù… Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¤ÙƒØ¯</h2>
    <div id="status">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© Pi...</div>

    <button id="btn-login" onclick="doLogin()">ğŸš€ Ø§ØªØµØ§Ù„ Ø§Ù„Ø¢Ù†</button>

    <script>
        const statusDiv = document.getElementById('status');
        const btn = document.getElementById('btn-login');

        // 1. Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­ØªÙ‰ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
        window.addEventListener('load', () => {
            try {
                statusDiv.innerText = "Ø¬Ø§Ø±ÙŠ ØªÙ‡ÙŠØ¦Ø© Pi...";
                
                // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ÙƒØªØ¨Ø© (Ø§Ù„Ø¥ØµØ¯Ø§Ø± 2.0 Ø£Ø¶Ù…Ù†)
                Pi.init({ version: "2.0", sandbox: true });
                
                // Ù„Ùˆ ÙˆØµÙ„Ù†Ø§ Ù‡Ù†Ø§ ÙŠØ¨Ù‚Ù‰ Ù†Ø¬Ø­Øª Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
                statusDiv.innerText = "âœ… Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø¬Ø§Ù‡Ø²Ø©. Ø§Ø¶ØºØ· Ù„Ù„Ø§ØªØµØ§Ù„.";
                statusDiv.style.color = "#00c851";
                btn.style.display = "block"; // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø±Ø§Ø± Ø§Ù„Ø¢Ù† ÙÙ‚Ø·

            } catch (err) {
                statusDiv.innerText = "ÙØ´Ù„ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©: " + err;
                statusDiv.style.color = "red";
            }
        });

        // 2. Ø¯Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
        async function doLogin() {
            btn.disabled = true;
            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...";
            
            try {
                const scopes = ['username', 'payments'];
                const auth = await Pi.authenticate(scopes, onIncomplete);
                
                alert("ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: " + auth.user.username);
                btn.innerText = "ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ âœ…";
                
            } catch (err) {
                alert("Ø®Ø·Ø£: " + err);
                btn.innerText = "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
                btn.disabled = false;
            }
        }

        function onIncomplete(p) { console.log(p); }
    </script>
</body>
</html>
