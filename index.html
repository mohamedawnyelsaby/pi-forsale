<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forsale AI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #0a1128 0%, #1a2e44 100%);
            color: white;
            min-height: 100vh;
            padding-bottom: 70px;
        }
        
        .header {
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .logo { font-size: 24px; font-weight: 900; color: #FFD700; }
        .ai { background: #00f2ff; color: black; padding: 2px 6px; border-radius: 4px; font-size: 10px; margin-left: 5px; }
        
        .main { padding: 20px; }
        .search-box {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            padding: 12px 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .search-box input {
            background: transparent;
            border: none;
            color: white;
            flex: 1;
            font-size: 14px;
            outline: none;
        }
        .search-box input::placeholder { color: rgba(255,255,255,0.5); }
        
        h2 { margin: 20px 0 15px; font-size: 18px; }
        
        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }
        .product {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .product:active { transform: scale(0.95); }
        .product-img {
            width: 100%;
            height: 140px;
            background: #000;
            position: relative;
            overflow: hidden;
        }
        .product-img img { width: 100%; height: 100%; object-fit: cover; }
        .ai-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            background: rgba(0,0,0,0.8);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            color: #00f2ff;
            border: 1px solid #00f2ff;
        }
        .product-info { padding: 12px; }
        .product-name {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .product-price { color: #FFD700; font-weight: bold; font-size: 16px; }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0a1128;
            z-index: 200;
            overflow-y: auto;
        }
        .modal.show { display: block; animation: slideUp 0.3s ease; }
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .modal-header {
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .close-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .modal-content { padding: 20px; padding-bottom: 100px; }
        .detail-img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 15px;
        }
        .detail-title { font-size: 22px; font-weight: bold; margin-bottom: 10px; }
        .detail-price { font-size: 28px; color: #FFD700; font-weight: 900; margin-bottom: 20px; }
        
        .info-box {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .info-title {
            font-size: 16px;
            color: #00f2ff;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .info-text { font-size: 14px; line-height: 1.6; opacity: 0.9; }
        
        .buy-bar {
            position: fixed;
            bottom: 60px;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        .buy-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 50px;
            background: #2ECC71;
            color: black;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .buy-btn:active { transform: scale(0.98); }
        
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: rgba(255,255,255,0.5);
            font-size: 11px;
            cursor: pointer;
            padding: 5px 15px;
        }
        .nav-item i { font-size: 20px; margin-bottom: 3px; }
        .nav-item.active { color: #FFD700; }
        
        .success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #2ECC71;
            color: black;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            z-index: 300;
            display: none;
            min-width: 250px;
        }
        .success.show {
            display: block;
            animation: pop 0.3s ease;
        }
        @keyframes pop {
            0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        .success i { font-size: 50px; margin-bottom: 15px; }
        
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="header">
    <div class="logo"><span class="ai">AI</span>Forsale</div>
</div>

<div class="main">
    <div class="search-box">
        <i class="fa-solid fa-magnifying-glass"></i>
        <input type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ù…Ù†ØªØ¬...">
    </div>
    
    <h2>Ù…Ù†ØªØ¬Ø§Øª Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h2>
    <div class="products" id="products"></div>
</div>

<div class="modal" id="modal">
    <div class="modal-header">
        <div class="logo"><span class="ai">AI</span>ØªÙØ§ØµÙŠÙ„</div>
        <div class="close-btn" onclick="closeModal()">
            <i class="fa-solid fa-xmark"></i>
        </div>
    </div>
    <div class="modal-content">
        <img id="dImg" class="detail-img">
        <div class="detail-title" id="dTitle"></div>
        <div class="detail-price" id="dPrice"></div>
        
        <div class="info-box">
            <div class="info-title">
                <i class="fa-solid fa-microchip"></i>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
            </div>
            <p class="info-text" id="dDesc"></p>
        </div>
        
        <div class="info-box">
            <div class="info-title">
                <i class="fa-solid fa-truck-fast"></i>Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„ØªÙˆØµÙŠÙ„
            </div>
            <p class="info-text">âœ… ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ Ø®Ù„Ø§Ù„ 3-5 Ø£ÙŠØ§Ù…<br>ğŸ¤– ØªØªØ¨Ø¹ Ø°ÙƒÙŠ Ø¨ÙˆØ§Ø³Ø·Ø© Logy AI</p>
        </div>
        
        <div class="info-box" style="border-color: #2ECC71;">
            <div class="info-title" style="color: #2ECC71;">
                <i class="fa-solid fa-shield-alt"></i>Ø¶Ù…Ø§Ù† Ø§Ù„Ø­Ù…Ø§ÙŠØ©
            </div>
            <p class="info-text" style="color: #2ECC71;">
                ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ø­Ø¬ÙˆØ² Ø­ØªÙ‰ ØªØ³ØªÙ„Ù… Ø§Ù„Ù…Ù†ØªØ¬<br>
                ğŸ”’ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ÙƒØ§Ù…Ù„ ÙÙŠ Ø­Ø§Ù„Ø© ÙˆØ¬ÙˆØ¯ Ù…Ø´ÙƒÙ„Ø©
            </p>
        </div>
    </div>
    <div class="buy-bar">
        <button class="buy-btn" onclick="buy()">
            <i class="fa-solid fa-wallet"></i>
            <span>Ø´Ø±Ø§Ø¡ Ø¨Ù€ <span id="bPrice">0</span> Pi</span>
        </button>
    </div>
</div>

<div class="footer">
    <div class="nav-item active">
        <i class="fa-solid fa-house"></i>
        <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
    </div>
    <div class="nav-item" onclick="alert('Logy AI Ù‚Ø±ÙŠØ¨Ø§Ù‹...')">
        <i class="fa-solid fa-robot"></i>
        <span>Logy AI</span>
    </div>
    <div class="nav-item" onclick="alert('Ø·Ù„Ø¨Ø§ØªÙƒ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡')">
        <i class="fa-solid fa-box"></i>
        <span>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
    </div>
    <div class="nav-item" onclick="openPiWallet()">
        <i class="fa-solid fa-wallet"></i>
        <span>Ø§Ù„Ù…Ø­ÙØ¸Ø©</span>
    </div>
</div>

<div class="success" id="success">
    <i class="fa-solid fa-check-circle"></i>
    <div style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">ØªÙ… Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­!</div>
    <div style="font-size: 13px; opacity: 0.8;">Ø³ÙŠØªÙ… Ø´Ø­Ù† Ù…Ù†ØªØ¬Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ ğŸš€</div>
</div>

<script>
const PRODUCTS = [
    { id: 1, name: 'iPhone 15 Pro Max', price: 0.1, img: 'https://images.unsplash.com/photo-1695048133142-1a20484d2569?w=400&h=300&fit=crop', desc: 'Ø¢ÙŠÙÙˆÙ† 15 Ø¨Ø±Ùˆ Ù…Ø§ÙƒØ³ Ø¨Ø­Ø§Ù„Ø© Ù…Ù…ØªØ§Ø²Ø©ØŒ 256GBØŒ ÙØ­Øµ ÙƒØ§Ù…Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ' },
    { id: 2, name: 'MacBook Pro M3', price: 0.15, img: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400&h=300&fit=crop', desc: 'Ù„Ø§Ø¨ØªÙˆØ¨ Ø§Ø­ØªØ±Ø§ÙÙŠ Ø¬Ø¯ÙŠØ¯ØŒ M3 MaxØŒ 32GB RAMØŒ Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ†' },
    { id: 3, name: 'AirPods Pro 2', price: 0.05, img: 'https://images.unsplash.com/photo-1606841837239-c5a1a4a07af7?w=400&h=300&fit=crop', desc: 'Ø³Ù…Ø§Ø¹Ø© Ø£Ø¨Ù„ Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù…Ø¹ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡ØŒ Ø¨Ø­Ø§Ù„Ø© Ù…Ù…ØªØ§Ø²Ø©' },
    { id: 4, name: 'Apple Watch Ultra', price: 0.08, img: 'https://images.unsplash.com/photo-1579586337278-3befd40fd17a?w=400&h=300&fit=crop', desc: 'Ø³Ø§Ø¹Ø© Ø¢Ø¨Ù„ Ø§Ù„ØªØ±Ø§ØŒ Ù…Ù‚Ø§ÙˆÙ…Ø© Ù„Ù„Ù…Ø§Ø¡ØŒ GPS Ù…Ø¯Ù…Ø¬' },
    { id: 5, name: 'iPad Pro 12.9"', price: 0.12, img: 'https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=400&h=300&fit=crop', desc: 'Ø¢ÙŠØ¨Ø§Ø¯ Ø¨Ø±Ùˆ Ø´Ø§Ø´Ø© 12.9 Ø¨ÙˆØµØ©ØŒ M2 chipØŒ Ù„Ù„Ù…ØµÙ…Ù…ÙŠÙ† ÙˆØ§Ù„ÙÙ†Ø§Ù†ÙŠÙ†' },
    { id: 6, name: 'Sony WH-1000XM5', price: 0.06, img: 'https://images.unsplash.com/photo-1546435770-a3e426bf472b?w=400&h=300&fit=crop', desc: 'Ø³Ù…Ø§Ø¹Ø© Ø³ÙˆÙ†ÙŠ Ø§Ù„Ø£ÙØ¶Ù„ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡ØŒ Ø¬ÙˆØ¯Ø© ØµÙˆØª Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©' }
];

let current = null;
let piUser = null;

function render() {
    document.getElementById('products').innerHTML = PRODUCTS.map(p => `
        <div class="product" onclick="open(${p.id})">
            <div class="product-img">
                <img src="${p.img}" onerror="this.src='https://placehold.co/400x300/1a2e44/FFD700?text=${encodeURIComponent(p.name)}'">
                <div class="ai-badge">AI âœ“</div>
            </div>
            <div class="product-info">
                <div class="product-name">${p.name}</div>
                <div class="product-price">${p.price} Pi</div>
            </div>
        </div>
    `).join('');
}

function open(id) {
    current = PRODUCTS.find(p => p.id === id);
    document.getElementById('dImg').src = current.img;
    document.getElementById('dImg').onerror = function() {
        this.src = `https://placehold.co/600x400/1a2e44/FFD700?text=${encodeURIComponent(current.name)}`;
    };
    document.getElementById('dTitle').textContent = current.name;
    document.getElementById('dPrice').textContent = current.price + ' Pi';
    document.getElementById('dDesc').textContent = current.desc;
    document.getElementById('bPrice').textContent = current.price;
    document.getElementById('modal').classList.add('show');
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    document.getElementById('modal').classList.remove('show');
    document.body.style.overflow = '';
}

async function buy() {
    const btn = document.querySelector('.buy-btn');
    const orig = btn.innerHTML;
    btn.innerHTML = '<div class="spinner"></div> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...';
    btn.disabled = true;
    
    try {
        if (typeof Pi !== 'undefined') {
            if (!piUser) {
                const auth = await Pi.authenticate(['username', 'payments'], onIncomplete);
                piUser = auth.user;
            }
            
            await Pi.createPayment({
                amount: current.price,
                memo: `Ø´Ø±Ø§Ø¡ ${current.name}`,
                metadata: { productId: current.id }
            }, {
                onReadyForServerApproval: (pid) => console.log('Approved:', pid),
                onReadyForServerCompletion: (pid, txid) => {
                    console.log('Completed:', pid, txid);
                    showSuccess();
                },
                onCancel: () => {
                    btn.innerHTML = orig;
                    btn.disabled = false;
                },
                onError: (e) => {
                    alert('Ø®Ø·Ø£: ' + e.message);
                    btn.innerHTML = orig;
                    btn.disabled = false;
                }
            });
        } else {
            await new Promise(r => setTimeout(r, 2000));
            showSuccess();
        }
    } catch (e) {
        alert('ÙØ´Ù„: ' + e.message);
        btn.innerHTML = orig;
        btn.disabled = false;
    }
}

function showSuccess() {
    closeModal();
    const s = document.getElementById('success');
    s.classList.add('show');
    setTimeout(() => s.classList.remove('show'), 3000);
    const btn = document.querySelector('.buy-btn');
    btn.innerHTML = `<i class="fa-solid fa-wallet"></i> Ø´Ø±Ø§Ø¡ Ø¨Ù€ <span id="bPrice">${current.price}</span> Pi`;
    btn.disabled = false;
}

function onIncomplete(payment) {
    console.log('Incomplete:', payment);
}

function openPiWallet() {
    if (typeof Pi !== 'undefined') {
        // ÙÙŠ Pi Browser Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ù‡ÙŠÙØªØ­ Ø§Ù„Ù…Ø­ÙØ¸Ø©
        alert('Ø³ÙŠØªÙ… ÙØªØ­ Ù…Ø­ÙØ¸Ø© Pi...');
    } else {
        alert('Ù…Ø­ÙØ¸Ø© Pi ØºÙŠØ± Ù…ØªØ§Ø­Ø©. Ø§ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Pi Browser.');
    }
}

if (typeof Pi !== 'undefined') {
    Pi.init({ version: "2.0", sandbox: true });
}

render();
</script>

</body>
</html>
